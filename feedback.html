<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HawkerHub - Feedback</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <nav class="navbar navbar-light bg-white shadow-sm">
      <div class="container">
        <a class="navbar-brand text-danger fw-bold" href="index.html">
          <i class="bi bi-shop-window me-2"></i>HawkerHub
        </a>
        <a href="hawker-directory.html" class="btn btn-outline-danger">
          <i class="bi bi-map me-2"></i>Browse Hawkers
        </a>
      </div>
    </nav>

    <div class="container mt-5">
      <h1 class="mb-4 text-danger">Customer Feedback</h1>

      <!-- Submit Feedback -->
      <div class="card mb-5">
        <div class="card-header bg-danger text-white">
          <h5 class="mb-0">Submit Feedback</h5>
        </div>
        <div class="card-body">
          <form id="feedbackForm">
            <div class="mb-3">
              <label class="form-label">Select Hawker *</label>
              <select class="form-select" id="hawkerSelect" required>
                <option value="">Choose a hawker...</option>
                <option>Tian Tian Chicken Rice</option>
                <option>Hill Street Fried Kway Teow</option>
                <option>Sungei Road Laksa</option>
                <option>Roti Prata House</option>
                <option>ABC Noodles</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Rating *</label>
              <div class="rating-stars mb-2">
                <span class="star" data-value="1">☆</span>
                <span class="star" data-value="2">☆</span>
                <span class="star" data-value="3">☆</span>
                <span class="star" data-value="4">☆</span>
                <span class="star" data-value="5">☆</span>
                <input type="hidden" id="ratingValue" value="0" required />
              </div>
              <small class="text-muted"
                >Click stars to rate (1 = Poor, 5 = Excellent)</small
              >
            </div>
            <div class="mb-3">
              <label class="form-label">Your Feedback *</label>
              <textarea
                class="form-control"
                id="feedbackText"
                rows="4"
                placeholder="Share your experience with this hawker..."
                required
              ></textarea>
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-danger btn-lg">
                Submit Feedback
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Recent Feedback -->
      <div class="card">
        <div class="card-header bg-danger text-white">
          <h5 class="mb-0">Recent Feedback</h5>
        </div>
        <div class="card-body">
          <div class="feedback-item mb-4 p-3 border rounded">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <div>
                <h6 class="mb-1">Tian Tian Chicken Rice</h6>
                <small class="text-muted">By John • 2 days ago</small>
              </div>
              <div class="text-warning">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
              </div>
            </div>
            <p class="mb-0">
              "Best chicken rice in Singapore! Always fresh and delicious. The
              rice is perfectly fragrant and the chicken is tender. Highly
              recommended!"
            </p>
          </div>

          <div class="feedback-item mb-4 p-3 border rounded">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <div>
                <h6 class="mb-1">Hill Street Fried Kway Teow</h6>
                <small class="text-muted">By Sarah • 1 week ago</small>
              </div>
              <div class="text-warning">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star"></i>
              </div>
            </div>
            <p class="mb-0">
              "Very tasty char kway teow with good portion size. A bit oily but
              that's expected. The wok hei is excellent!"
            </p>
          </div>

          <div class="feedback-item p-3 border rounded">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <div>
                <h6 class="mb-1">Sungei Road Laksa</h6>
                <small class="text-muted">By Mike • 2 weeks ago</small>
              </div>
              <div class="text-warning">
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-fill"></i>
                <i class="bi bi-star-half"></i>
              </div>
            </div>
            <p class="mb-0">
              "Authentic Katong laksa with rich coconut broth. Could use more
              ingredients but overall very satisfying."
            </p>
          </div>
        </div>
      </div>
    </div>

    <footer class="bg-dark text-white py-4 mt-5">
      <div class="container text-center">
        <p>&copy; 2024 HawkerHub. All rights reserved.</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Star rating system
      const stars = document.querySelectorAll(".star");
      const ratingValue = document.getElementById("ratingValue");

      stars.forEach((star) => {
        star.addEventListener("click", function () {
          const value = parseInt(this.getAttribute("data-value"));
          ratingValue.value = value;

          // Update star display
          stars.forEach((s, index) => {
            if (index < value) {
              s.textContent = "★";
              s.style.color = "#ffc107";
            } else {
              s.textContent = "☆";
              s.style.color = "#ccc";
            }
          });
        });

        // Hover effect
        star.addEventListener("mouseover", function () {
          const value = parseInt(this.getAttribute("data-value"));
          stars.forEach((s, index) => {
            if (index < value) {
              s.style.color = "#ffc107";
            }
          });
        });

        star.addEventListener("mouseout", function () {
          const currentRating = parseInt(ratingValue.value);
          stars.forEach((s, index) => {
            if (index >= currentRating) {
              s.style.color = "#ccc";
            }
          });
        });
      });

      // Handle feedback submission
      document
        .getElementById("feedbackForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const hawker = document.getElementById("hawkerSelect").value;
          const rating = document.getElementById("ratingValue").value;
          const feedback = document.getElementById("feedbackText").value;

          if (rating === "0") {
            alert("Please provide a rating by clicking the stars");
            return;
          }

          // In a real app, this would be sent to a server
          alert(
            `Thank you for your feedback!\n\nHawker: ${hawker}\nRating: ${rating}/5\n\nYour feedback has been submitted.`,
          );

          // Reset form
          document.getElementById("feedbackForm").reset();
          stars.forEach((star) => {
            star.textContent = "☆";
            star.style.color = "#ccc";
          });
          ratingValue.value = "0";
        });

      // Check if user is logged in
      window.onload = function () {
        const user = JSON.parse(localStorage.getItem("hawkerhub_user"));
        if (!user) {
          // Show login prompt
          const form = document.getElementById("feedbackForm");
          const submitBtn = form.querySelector('button[type="submit"]');
          submitBtn.textContent = "Login to Submit Feedback";
          submitBtn.onclick = function (e) {
            e.preventDefault();
            alert("Please login to submit feedback.");
            window.location.href = "login.html";
          };
        }
      };
    </script>

    <style>
      .rating-stars {
        font-size: 2rem;
        cursor: pointer;
      }
      .star {
        color: #ccc;
        margin-right: 5px;
        transition: color 0.2s;
      }
      .star:hover {
        color: #ffc107;
      }
    </style>
  </body>
</html>
